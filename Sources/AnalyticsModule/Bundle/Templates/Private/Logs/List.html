#let(table = [
    "title": "Logs",
    "create": false,
    "key": "analytics.logs"
])

#define(css):
tr {
    grid-template-columns: 1fr 1fr;
}
@media (min-width: 600px) {
    tr {
        grid-template-columns: 1fr 200px;
    }
}
#enddefine

#define(body):
<div class="lead">
    <h1>Logs</h1>
</div>
<form id="search-form" action="#($req.url.path)" method="get">
    #if(Request(query: "sort") != nil):
    <input type="hidden" id="sort" name="sort" value="#Request(query: "sort")">
    #endif
    #if(Request(query: "order") != nil):
    <input type="hidden" id="order" name="order" value="#Request(query: "order")">
    #endif
    <input type="text" id="search" name="search" placeholder="Search..." value="#Request(query: "search")">
</form>
<table>
    <thead>
        <tr>
            #var(link = nil)
            <td class="field">#(link = ["key": "path"])#inline("Admin/SortLink")</th>
            <td class="field">#(link = ["key": "date", "default": true, "sort": "desc"])#inline("Admin/SortLink")</th>
        </tr>
    </thead>
    <tbody>

    #for(item in list.items):
    <tr>
        <td class="field">
            #if(UserHasPermission(table.key + ".get")):
                <a href="#($req.url.path)#(item.id)/">#(item.path)</a>
            #else:
                #(item.path)
            #endif
        </td>
        <td class="field">
            #if(UserHasPermission(table.key + ".get")):
                <a href="#($req.url.path)#(item.id)/">
                    #Date(timeStamp: item.date, fixedFormat: $app.dateFormats.full, timeZone: $app.timezone)
                </a>
            #else:
                #Date(timeStamp: item.date, fixedFormat: $app.dateFormats.full, timeZone: $app.timezone)
            #endif
        </td>
    </tr>
    #endfor
    </tbody>
</table>
#enddefine

#inline("Admin/Index")

